<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Interativo de História - Versão Inclusiva</title>
  <meta name="description" content="Portal Interativo de História com conteúdos reais e interativos para crianças, incluindo recursos para deficiências visuais, auditivas, autismo e outras necessidades.">
  <meta name="keywords" content="História, Brasil, Mitologia Grega, História Antiga, Educação, Inclusão, Libras, Braille, Linha do Tempo, Jogo de Memória">
  <meta name="author" content="Gabriel Silveira Lima, Jordana França Soares">
  <style>
    /* Reset e estilos gerais */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      line-height: 1.6;
      padding-bottom: 80px;
      text-align: center;
    }
    header {
      background-color: #2c3e50;
      padding: 15px;
      color: #fff;
      text-align: center;
    }
    nav ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 0;
      margin: 0;
    }
    nav ul li { margin: 8px; }
    nav ul li a {
      text-decoration: none;
      color: #fff;
      font-size: 16px;
      transition: transform 0.3s ease;
    }
    nav ul li a:hover {
      transform: scale(1.1);
      text-decoration: underline;
    }
    .container {
      max-width: 950px;
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: left;
    }
    .section {
      display: none;
      margin-bottom: 40px;
      text-align: left;
    }
    .section.active {
      display: block;
      animation: fadeIn 0.6s forwards;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    h2 {
      color: #2c3e50;
      border-bottom: 2px solid #2c3e50;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }
    p { font-size: 17px; margin-bottom: 15px; text-align: justify; }
    .image-container {
      margin: 20px 0;
      text-align: center;
    }
    .image-container img {
      width: 100%;
      max-height: 300px;
      border-radius: 10px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .image-container img:hover { transform: scale(1.02); }
    iframe, video, audio {
      width: 100%;
      margin-top: 10px;
      border: none;
    }
    button {
      background-color: #3498db;
      border: none;
      color: #fff;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      margin: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    button:hover { background-color: #2980b9; transform: scale(1.05); }
    footer {
      background-color: #2c3e50;
      color: #fff;
      text-align: center;
      padding: 15px;
      font-size: 14px;
      position: fixed;
      width: 100%;
      bottom: 0;
    }
    .references { margin-top: 15px; font-size: 0.9em; }
    .references ul { list-style-type: circle; margin-left: 40px; }
    .curiosidades {
      background-color: #ecf0f1;
      padding: 10px;
      border-radius: 5px;
      margin: 20px 0;
    }
    .curiosidades h4 { color: #2980b9; margin-bottom: 10px; }
    .curiosidades ul { list-style-type: square; margin-left: 40px; }
    /* Estilos para Contação de Histórias */
    .story-container { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-top: 10px; }
    .story-controls { text-align: center; margin-top: 10px; }
    /* Estilos para Linha do Tempo Interativa */
    .timeline-container { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-top: 10px; }
    .timeline-buttons { display: flex; justify-content: space-around; margin-bottom: 15px; }
    .timeline-buttons button { flex: 1; margin: 5px; }
    /* Estilos para Jogo de Memória */
    .memory-game { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; }
    .memory-card {
      background-color: #2980b9;
      color: #fff;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.3s ease;
    }
    .memory-card.flipped { background-color: #27ae60; transform: rotateY(180deg); }
    .memory-card.matched { background-color: #7f8c8d; cursor: default; }
    /* Estilos para Dashboard de Progresso */
    .progress-dashboard {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      position: relative;
      overflow: hidden;
    }
    .progress-dashboard::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
      animation: float 20s infinite linear;
    }
    @keyframes float {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-100px); }
    }
    .progress-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .progress-item {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      backdrop-filter: blur(10px);
    }
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #45a049);
      border-radius: 4px;
      transition: width 0.5s ease;
      position: relative;
    }
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background-image: linear-gradient(45deg, transparent 35%, rgba(255,255,255,.2) 35%, rgba(255,255,255,.2) 65%, transparent 65%, transparent);
      background-size: 20px 20px;
      animation: progress-animate 1s linear infinite;
    }
    @keyframes progress-animate {
      0% { background-position: 0 0; }
      100% { background-position: 20px 0; }
    }
    .badge {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      margin: 2px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .background-status {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 15px;
      border-radius: 25px;
      font-size: 12px;
      z-index: 1000;
      transition: all 0.3s ease;
      transform: translateX(100%);
    }
    .background-status.active {
      transform: translateX(0);
    }
    .loading-spinner {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid #ffffff33;
      border-top: 2px solid #ffffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* Responsividade */
    @media (max-width: 600px) {
      nav ul { flex-direction: column; }
      .container { padding: 10px; }
      header, footer { padding: 10px; }
      .memory-game { grid-template-columns: repeat(2, 1fr); }
      .progress-summary { grid-template-columns: 1fr; }
      .background-status { bottom: 80px; right: 10px; }
    }
  </style>
</head>
<body>

  <!-- Cabeçalho e Navegação -->
  <header>
    <h1>Portal Interativo de História</h1>
    <nav>
      <ul>
        <li><a href="#" onclick="showSection('home')" aria-label="Home">Home</a></li>
        <li><a href="#" onclick="showSection('brasil')" aria-label="História do Brasil">História do Brasil</a></li>
        <li><a href="#" onclick="showSection('grega')" aria-label="Mitologia Grega">Mitologia Grega</a></li>
        <li><a href="#" onclick="showSection('antiga')" aria-label="História Antiga">História Antiga</a></li>
        <li><a href="#" onclick="showSection('comunicacao')" aria-label="Comunicação Inclusiva">Comunicação Inclusiva</a></li>
        <li><a href="#" onclick="showSection('libras')" aria-label="Libras">Libras</a></li>
        <li><a href="#" onclick="showSection('quiz')" aria-label="Quiz de História">Quiz de História</a></li>
        <li><a href="#" onclick="showSection('atividades')" aria-label="Atividades Interativas">Atividades Interativas</a></li>
        <li><a href="#" onclick="showSection('historias')" aria-label="Contação de Histórias">Contação de Histórias</a></li>
        <li><a href="#" onclick="showSection('timeline')" aria-label="Linha do Tempo">Linha do Tempo</a></li>
        <li><a href="#" onclick="showSection('memoria')" aria-label="Jogo de Memória">Jogo de Memória</a></li>
        <li><a href="#" onclick="showSection('autores')" aria-label="Sobre os Autores">Sobre os Autores</a></li>
        <li><a href="#" onclick="showSection('progresso')" aria-label="Meu Progresso">Meu Progresso</a></li>
        <li><a href="#" onclick="showSection('braille')" aria-label="Conversor Braille">Conversor Braille</a></li>
      </ul>
    </nav>
  </header>

  <!-- Conteúdo Principal -->
  <div class="container">
    
    <!-- Seção Home -->
    <section id="home" class="section active">
      <h2>Bem-vindo ao Portal de História</h2>
      <p>
        Explore conteúdos interativos e educativos sobre História do Brasil, Mitologia Grega, História Antiga e muito mais. Nosso portal promove a inclusão com recursos para crianças com deficiências visuais, auditivas, de fala, autismo e outras necessidades.
      </p>
      <div class="image-container">
        <!-- Imagem do Navio de Cabral -->
        <img src="media/cabral_ship.jpg" alt="Navio de Cabral navegando">
      </div>
      <!-- Vídeo introdutório com legendas e audiodescrição -->
      <video controls>
        <source src="media/intro.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
      <!-- Áudio introdutório -->
      <audio controls>
        <source src="media/intro.mp3" type="audio/mp3">
        Seu navegador não suporta áudio.
      </audio>
      <button aria-label="Ouvir Introdução" onclick="speakText('Bem-vindo ao Portal de História. Explore conteúdos interativos e educativos.')">Ouvir Introdução</button>
    </section>

    <!-- Seção História do Brasil -->
    <section id="brasil" class="section">
      <h2>História do Brasil</h2>
      <p>
        A História do Brasil inicia-se com a chegada dos portugueses em 1500, comandados por Pedro Álvares Cabral. Durante o período colonial, a economia era impulsionada pela extração do pau‑brasil, produção de açúcar e mineração – sustentada pela mão de obra escrava. Em 1822, o país conquistou a independência, pavimentando o caminho para a República.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>Antes da chegada dos colonizadores, diversos povos indígenas habitavam o território.</li>
          <li>O pau‑brasil foi um dos primeiros produtos de exportação.</li>
          <li>A Lei Áurea, de 1888, aboliu oficialmente a escravidão.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem do Mapa do Brasil Colonial -->
        <img src="media/map_brazil_colonial.jpg" alt="Mapa do Brasil Colonial">
      </div>
      <!-- Vídeo educativo sobre História do Brasil -->
      <video controls>
        <source src="media/historia_brasil.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
      <!-- Áudio narrativo do período colonial -->
      <audio controls>
        <source src="media/historia_brasil.mp3" type="audio/mp3">
        Seu navegador não suporta áudio.
      </audio>
      <button aria-label="Ouvir História do Brasil" onclick="speakText('Conheça a trajetória do Brasil, desde as civilizações indígenas até a formação da República.')">Ouvir História do Brasil</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Fausto, B. – <em>História do Brasil</em>, EdUSP, 2016.</li>
          <li><a href="https://www.bn.gov.br/" target="_blank">Biblioteca Nacional</a></li>
        </ul>
      </div>
    </section>

    <!-- Seção Mitologia Grega -->
    <section id="grega" class="section">
      <h2>Mitologia Grega</h2>
      <p>
        A mitologia grega reúne lendas que explicam a origem do mundo e os valores humanos por meio das histórias de deuses, heróis e criaturas fantásticas. Obras clássicas, como <em>A Ilíada</em> e <em>A Odisseia</em>, narram os feitos de Zeus, Hércules, Atena e outros.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>O Monte Olimpo era considerado a morada dos deuses.</li>
          <li>Hércules é celebrado por seus doze trabalhos.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem dos Deuses do Olimpo -->
        <img src="media/zeus_olympus.jpg" alt="Representação dos deuses do Olimpo">
      </div>
      <!-- Vídeo educativo sobre Mitologia Grega -->
      <video controls>
        <source src="media/mitologia_grega.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
      <!-- Áudio narrativo sobre mitos gregos -->
      <audio controls>
        <source src="media/mitologia_grega.mp3" type="audio/mp3">
        Seu navegador não suporta áudio.
      </audio>
      <button aria-label="Ouvir Mitologia Grega" onclick="speakText('Explore os mitos e lendas da Grécia Antiga, com histórias de deuses e heróis.')">Ouvir Mitologia Grega</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Homero – <em>A Ilíada</em> e <em>A Odisseia</em>.</li>
          <li>Graves, R. – <em>Os Mitos Gregos</em>, Nova Fronteira, 2013.</li>
        </ul>
      </div>
    </section>

    <!-- Seção História Antiga -->
    <section id="antiga" class="section">
      <h2>História Antiga</h2>
      <p>
        A História Antiga aborda o surgimento das primeiras civilizações – do Egito, com suas pirâmides e hieróglifos, à Mesopotâmia, berço da escrita, passando pelos impérios grego e romano, que lançaram as bases da cultura e do direito ocidental.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>O Código de Hamurábi é um dos primeiros conjuntos de leis registrados.</li>
          <li>O Egito é famoso por suas imponentes pirâmides e pela escrita hieroglífica.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem da Pirâmide de Gizé -->
        <img src="media/great_pyramid_of_giza.jpg" alt="Pirâmide de Gizé">
      </div>
      <!-- Vídeo educativo sobre Civilizações da Antiguidade -->
      <video controls>
        <source src="media/civilizacoes_antigas.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
      <!-- Áudio explicativo sobre a invenção da escrita -->
      <audio controls>
        <source src="media/civilizacoes_antigas.mp3" type="audio/mp3">
        Seu navegador não suporta áudio.
      </audio>
      <button aria-label="Ouvir História Antiga" onclick="speakText('Descubra as civilizações antigas que moldaram o mundo, como os egípcios, mesopotâmicos, gregos e romanos.')">Ouvir História Antiga</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Gonçalves, E. – <em>História Antiga: Egito e Mesopotâmia</em>, Contexto, 2019.</li>
          <li>Bernardini, C. – <em>Mundo Antigo: Grécia e Roma</em>, Sulina, 2020.</li>
        </ul>
      </div>
    </section>

    <!-- Seção Comunicação Inclusiva -->
    <section id="comunicacao" class="section">
      <h2>Comunicação Inclusiva</h2>
      <p>
        A comunicação inclusiva é essencial para que todas as crianças tenham acesso à educação. Utilizamos legendas, audiodescrição, Libras e adaptações visuais para garantir a compreensão de todos.
      </p>
      <div class="image-container">
        <!-- Imagem para Comunicação Inclusiva -->
        <img src="media/comunicacao_inclusiva.jpg" alt="Ilustração de comunicação inclusiva">
      </div>
      <button aria-label="Ouvir Comunicação Inclusiva" onclick="speakText('Entenda a importância da comunicação inclusiva para promover a participação de todos.')">Ouvir Comunicação Inclusiva</button>
    </section>

    <!-- Seção Libras -->
    <section id="libras" class="section">
      <h2>Libras – Língua Brasileira de Sinais</h2>
      <p>
        Assista a vídeos com interpretação em Libras para acompanhar o conteúdo de forma acessível. Essa seção foi desenvolvida para atender crianças surdas ou com deficiência auditiva.
      </p>
      <div class="image-container">
        <!-- Imagem para Libras -->
        <img src="media/libras.jpg" alt="Interpretação em Libras">
      </div>
      <video controls>
        <source src="media/libras.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
      <button aria-label="Ouvir Libras" onclick="speakText('Assista ao vídeo com interpretação em Libras para acompanhar o conteúdo.')">Ouvir Libras</button>
    </section>

    <!-- Seção Quiz de História -->
    <section id="quiz" class="section">
      <h2>Quiz de História</h2>
      <p>Teste seus conhecimentos de forma interativa!</p>
      <div class="quiz-container">
        <button aria-label="Iniciar Quiz" onclick="startQuiz()">Iniciar Quiz</button>
        <p id="quizPergunta"></p>
        <button id="resposta1"></button>
        <button id="resposta2"></button>
        <p id="resultadoQuiz"></p>
      </div>
    </section>

    <!-- Seção Atividades Interativas -->
    <section id="atividades" class="section">
      <h2>Atividades Interativas</h2>
      <p>
        Divirta-se e aprenda com atividades lúdicas! Explore desafios que estimulam a criatividade e o raciocínio.
      </p>
      <button onclick="alert('Atividade: Complete a imagem! (Implementação futura.)')" aria-label="Completar Imagem">Completar Imagem</button>
      <button onclick="alert('Atividade: Relacione os fatos históricos! (Exemplo de atividade interativa.)')" aria-label="Relacionar Fatos">Relacionar Fatos</button>
      <button onclick="alert('Atividade: Quebra-cabeça histórico! (Implementação futura.)')" aria-label="Quebra-Cabeça Histórico">Quebra-Cabeça Histórico</button>
    </section>

    <!-- Seção Contação de Histórias -->
    <section id="historias" class="section">
      <h2>Contação de Histórias</h2>
      <p>Participe de uma aventura interativa! Navegue pelos capítulos da história "A Aventura de Cabral".</p>
      <div class="story-container" id="storyContainer">
        <!-- Capítulo atual será exibido aqui -->
      </div>
      <div class="story-controls">
        <button onclick="prevChapter()" aria-label="Capítulo Anterior">Anterior</button>
        <button onclick="nextChapter()" aria-label="Próximo Capítulo">Próximo</button>
        <button onclick="speakStory()" aria-label="Ouvir História Atual">Ouvir História</button>
      </div>
      <video controls>
        <source src="media/historia_libras.mp4" type="video/mp4">
        Seu navegador não suporta o vídeo.
      </video>
    </section>

    <!-- Seção Linha do Tempo Interativa -->
    <section id="timeline" class="section">
      <h2>Linha do Tempo Interativa</h2>
      <p>Explore diferentes eras da história através desta linha do tempo interativa.</p>
      <div class="timeline-buttons">
        <button onclick="showEra('pre')" aria-label="Pré-História">Pré-História</button>
        <button onclick="showEra('antiguidade')" aria-label="Antiguidade">Antiguidade</button>
        <button onclick="showEra('media')" aria-label="Idade Média">Idade Média</button>
        <button onclick="showEra('moderna')" aria-label="Idade Moderna">Idade Moderna</button>
        <button onclick="showEra('contemporanea')" aria-label="Idade Contemporânea">Idade Contemporânea</button>
      </div>
      <div class="timeline-container" id="eraContainer">
        <p>Selecione uma era para visualizar detalhes.</p>
      </div>
    </section>

    <!-- Seção Jogo de Memória -->
    <section id="memoria" class="section">
      <h2>Jogo de Memória</h2>
      <p>Encontre os pares correspondentes e aprenda sobre ícones históricos.</p>
      <div class="memory-game" id="memoryGame">
        <!-- Cartas serão geradas dinamicamente -->
      </div>
      <button onclick="resetMemoryGame()" aria-label="Reiniciar Jogo de Memória">Reiniciar Jogo</button>
    </section>

    <!-- Seção Sobre os Autores -->
    <section id="autores" class="section">
      <h2>Sobre os Autores</h2>
      <div class="author-info">
        <div>
          <h3>Gabriel Silveira Lima</h3>
          <p>Especialista em Segurança Pública, Bacharel em Direito e Bacharelando em Ciência da Computação, com experiência em cibersegurança e hacking ético.</p>
        </div>
        <div>
          <h3>Jordana França Soares</h3>
          <p>Licencianda em História com ênfase em metodologias interativas e educacionais, atuante em projetos de inclusão e comunicação acessível.</p>
        </div>
      </div>
      <audio controls>
        <source src="media/autores.mp3" type="audio/mp3">
        Seu navegador não suporta áudio.
      </audio>
      <button aria-label="Ouvir Sobre os Autores" onclick="speakText('Conheça os autores: Gabriel Silveira Lima e Jordana França Soares.')">Ouvir Sobre os Autores</button>
    </section>

    <!-- Seção Dashboard de Progresso -->
    <section id="progresso" class="section">
      <h2>Meu Progresso de Aprendizagem</h2>
      <div class="progress-dashboard">
        <h3>🎯 Painel de Progresso</h3>
        <p>Acompanhe seu progresso através do Portal Interativo de História</p>
        
        <div class="progress-summary">
          <div class="progress-item">
            <h4>📚 Seções Visitadas</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="sectionsProgress" style="width: 0%"></div>
            </div>
            <span id="sectionsCount">0 de 12</span>
          </div>
          
          <div class="progress-item">
            <h4>🎮 Quiz Completado</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
            </div>
            <span id="quizScore">0% de acertos</span>
          </div>
          
          <div class="progress-item">
            <h4>📖 Histórias Lidas</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="storiesProgress" style="width: 0%"></div>
            </div>
            <span id="storiesCount">0 de 3 capítulos</span>
          </div>
          
          <div class="progress-item">
            <h4>🧠 Jogos Jogados</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="gamesProgress" style="width: 0%"></div>
            </div>
            <span id="gamesCount">0 jogos completados</span>
          </div>
        </div>
        
        <div style="margin-top: 20px;">
          <h4>🏆 Conquistas Desbloqueadas</h4>
          <div id="badgesContainer">
            <!-- Badges serão adicionadas dinamicamente -->
          </div>
        </div>
        
        <div style="margin-top: 15px; text-align: center;">
          <button onclick="resetProgress()" aria-label="Resetar Progresso">🔄 Resetar Progresso</button>
          <button onclick="exportProgress()" aria-label="Exportar Progresso">📊 Exportar Dados</button>
        </div>
      </div>
      
      <div style="margin-top: 20px;">
        <h3>📈 Estatísticas Detalhadas</h3>
        <div id="detailedStats">
          <p><strong>Tempo total no portal:</strong> <span id="totalTime">0 minutos</span></p>
          <p><strong>Última atividade:</strong> <span id="lastActivity">Nenhuma</span></p>
          <p><strong>Seção favorita:</strong> <span id="favoriteSection">Em análise...</span></p>
          <p><strong>Streak de aprendizado:</strong> <span id="learningStreak">0 dias</span></p>
        </div>
      </div>
    </section>

    <!-- Seção Conversor Braille -->
    <section id="braille" class="section">
      <h2>Conversor Braille</h2>
      <p>Digite um texto para convertê-lo em Braille (simplificado), facilitando a leitura para pessoas com deficiência visual.</p>
      <div class="braille-container">
        <textarea id="brailleInput" rows="2" placeholder="Digite um texto..." aria-label="Entrada de texto para Braille"></textarea><br>
        <button onclick="converterParaBraille()" aria-label="Converter para Braille">Converter para Braille</button>
        <div id="brailleOutput" class="braille-output" style="font-size: 20px; margin-top: 10px;"></div>
      </div>
    </section>

  </div>

  <!-- Indicador de Status de Processamento em Segundo Plano -->
  <div id="backgroundStatus" class="background-status">
    <span class="loading-spinner"></span>
    <span id="statusText">Inicializando...</span>
  </div>

  <!-- Rodapé -->
  <footer>
    <p>&copy; 2025 Portal Interativo de História - Todos os direitos reservados.</p>
  </footer>

  <!-- Scripts JavaScript -->
  <script>
    /* ======== Sistema de Progresso e Processamento em Segundo Plano ========= */
    
    // Configurações globais
    const STORAGE_KEY = 'portal_historia_progress';
    const BACKGROUND_TASKS = [];
    let backgroundWorker = null;
    let progressData = {
      sectionsVisited: new Set(),
      quizCompleted: false,
      quizScore: 0,
      storiesRead: 0,
      gamesPlayed: new Set(),
      badges: new Set(),
      totalTime: 0,
      lastActivity: null,
      sectionTime: {},
      startTime: Date.now()
    };

    // Sistema de Background Processing
    class BackgroundProcessor {
      constructor() {
        this.tasks = new Map();
        this.isRunning = false;
        this.statusElement = document.getElementById('backgroundStatus');
        this.statusText = document.getElementById('statusText');
      }

      start() {
        this.isRunning = true;
        this.statusElement.classList.add('active');
        this.updateStatus('Sistema iniciado');
        
        // Auto-save a cada 30 segundos
        setInterval(() => this.autoSave(), 30000);
        
        // Preload de conteúdo
        setTimeout(() => this.preloadContent(), 2000);
        
        // Analytics em background
        setInterval(() => this.collectAnalytics(), 60000);
        
        // Ocultação automática do status após 3 segundos
        setTimeout(() => {
          this.statusElement.classList.remove('active');
        }, 3000);
      }

      updateStatus(message) {
        this.statusText.textContent = message;
        this.statusElement.classList.add('active');
        
        setTimeout(() => {
          this.statusElement.classList.remove('active');
        }, 2000);
      }

      autoSave() {
        this.updateStatus('💾 Salvando progresso...');
        saveProgressData();
      }

      preloadContent() {
        this.updateStatus('⚡ Carregando conteúdo...');
        
        // Simula preload de imagens e conteúdo
        const mediaElements = ['cabral_ship.jpg', 'map_brazil_colonial.jpg', 'great_pyramid_of_giza.jpg'];
        mediaElements.forEach(media => {
          const img = new Image();
          img.src = `media/${media}`;
        });
      }

      collectAnalytics() {
        // Atualiza tempo total
        progressData.totalTime = Math.floor((Date.now() - progressData.startTime) / 60000);
        
        // Determina seção favorita
        let maxTime = 0;
        let favoriteSection = 'Home';
        for (const [section, time] of Object.entries(progressData.sectionTime)) {
          if (time > maxTime) {
            maxTime = time;
            favoriteSection = section;
          }
        }
        
        // Atualiza interface
        updateProgressDisplay();
        
        this.updateStatus('📊 Coletando dados...');
      }

      addTask(name, task) {
        this.tasks.set(name, task);
        this.updateStatus(`➕ Adicionada: ${name}`);
      }

      runTask(name) {
        const task = this.tasks.get(name);
        if (task) {
          this.updateStatus(`⚙️ Executando: ${name}`);
          return task();
        }
      }
    }

    // Inicialização do sistema
    const backgroundProcessor = new BackgroundProcessor();

    // Carregar dados salvos
    function loadProgressData() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        const parsed = JSON.parse(saved);
        progressData = {
          ...progressData,
          ...parsed,
          sectionsVisited: new Set(parsed.sectionsVisited || []),
          gamesPlayed: new Set(parsed.gamesPlayed || []),
          badges: new Set(parsed.badges || []),
          startTime: parsed.startTime || Date.now()
        };
      }
      updateProgressDisplay();
    }

    // Salvar dados de progresso
    function saveProgressData() {
      const toSave = {
        ...progressData,
        sectionsVisited: Array.from(progressData.sectionsVisited),
        gamesPlayed: Array.from(progressData.gamesPlayed),
        badges: Array.from(progressData.badges)
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
    }

    // Atualizar display de progresso
    function updateProgressDisplay() {
      // Seções visitadas
      const sectionsCount = progressData.sectionsVisited.size;
      const sectionsProgress = (sectionsCount / 12) * 100;
      document.getElementById('sectionsProgress').style.width = `${sectionsProgress}%`;
      document.getElementById('sectionsCount').textContent = `${sectionsCount} de 12`;

      // Quiz
      const quizProgress = progressData.quizCompleted ? 100 : 0;
      document.getElementById('quizProgress').style.width = `${quizProgress}%`;
      document.getElementById('quizScore').textContent = `${progressData.quizScore}% de acertos`;

      // Histórias
      const storiesProgress = (progressData.storiesRead / 3) * 100;
      document.getElementById('storiesProgress').style.width = `${storiesProgress}%`;
      document.getElementById('storiesCount').textContent = `${progressData.storiesRead} de 3 capítulos`;

      // Jogos
      const gamesProgress = progressData.gamesPlayed.size > 0 ? 100 : 0;
      document.getElementById('gamesProgress').style.width = `${gamesProgress}%`;
      document.getElementById('gamesCount').textContent = `${progressData.gamesPlayed.size} jogos completados`;

      // Badges
      updateBadges();

      // Estatísticas detalhadas
      if (document.getElementById('totalTime')) {
        document.getElementById('totalTime').textContent = `${progressData.totalTime} minutos`;
        document.getElementById('lastActivity').textContent = progressData.lastActivity || 'Nenhuma';
        
        // Seção favorita
        let favoriteSection = 'Em análise...';
        if (Object.keys(progressData.sectionTime).length > 0) {
          favoriteSection = Object.keys(progressData.sectionTime).reduce((a, b) => 
            (progressData.sectionTime[a] || 0) > (progressData.sectionTime[b] || 0) ? a : b
          );
        }
        document.getElementById('favoriteSection').textContent = favoriteSection;
        
        // Streak
        const streak = Math.floor(progressData.totalTime / 60) || 0;
        document.getElementById('learningStreak').textContent = `${streak} dias`;
      }
    }

    // Sistema de badges/conquistas
    function updateBadges() {
      const badgesContainer = document.getElementById('badgesContainer');
      if (!badgesContainer) return;

      badgesContainer.innerHTML = '';

      // Verificar novas conquistas
      checkAchievements();

      // Mostrar badges
      if (progressData.badges.size === 0) {
        badgesContainer.innerHTML = '<p style="opacity: 0.7;">Nenhuma conquista desbloqueada ainda. Continue explorando!</p>';
      } else {
        progressData.badges.forEach(badge => {
          const badgeElement = document.createElement('span');
          badgeElement.className = 'badge';
          badgeElement.textContent = badge;
          badgesContainer.appendChild(badgeElement);
        });
      }
    }

    // Verificar conquistas
    function checkAchievements() {
      const newBadges = [];

      if (progressData.sectionsVisited.size >= 3 && !progressData.badges.has('🗺️ Explorador')) {
        newBadges.push('🗺️ Explorador');
      }

      if (progressData.sectionsVisited.size >= 8 && !progressData.badges.has('🌟 Historiador Junior')) {
        newBadges.push('🌟 Historiador Junior');
      }

      if (progressData.quizCompleted && progressData.quizScore >= 75 && !progressData.badges.has('🧠 Mestre do Quiz')) {
        newBadges.push('🧠 Mestre do Quiz');
      }

      if (progressData.storiesRead >= 3 && !progressData.badges.has('📚 Contador de Histórias')) {
        newBadges.push('📚 Contador de Histórias');
      }

      if (progressData.totalTime >= 30 && !progressData.badges.has('⏰ Dedicado')) {
        newBadges.push('⏰ Dedicado');
      }

      if (progressData.gamesPlayed.size > 0 && !progressData.badges.has('🎮 Jogador')) {
        newBadges.push('🎮 Jogador');
      }

      // Adicionar novas badges
      newBadges.forEach(badge => {
        progressData.badges.add(badge);
        showBadgeNotification(badge);
      });

      if (newBadges.length > 0) {
        saveProgressData();
      }
    }

    // Mostrar notificação de nova badge
    function showBadgeNotification(badge) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
        padding: 20px;
        border-radius: 15px;
        z-index: 10000;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        animation: bounceIn 0.6s ease;
      `;
      notification.innerHTML = `
        <h3>🎉 Nova Conquista!</h3>
        <p style="font-size: 24px; margin: 10px 0;">${badge}</p>
        <p>Parabéns pelo seu progresso!</p>
      `;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.animation = 'bounceOut 0.6s ease';
        setTimeout(() => notification.remove(), 600);
      }, 3000);
    }

    // Funções de controle de progresso
    function resetProgress() {
      if (confirm('Tem certeza que deseja resetar todo o seu progresso? Esta ação não pode ser desfeita.')) {
        localStorage.removeItem(STORAGE_KEY);
        progressData = {
          sectionsVisited: new Set(),
          quizCompleted: false,
          quizScore: 0,
          storiesRead: 0,
          gamesPlayed: new Set(),
          badges: new Set(),
          totalTime: 0,
          lastActivity: null,
          sectionTime: {},
          startTime: Date.now()
        };
        updateProgressDisplay();
        backgroundProcessor.updateStatus('🔄 Progresso resetado');
      }
    }

    function exportProgress() {
      const data = {
        ...progressData,
        sectionsVisited: Array.from(progressData.sectionsVisited),
        gamesPlayed: Array.from(progressData.gamesPlayed),
        badges: Array.from(progressData.badges),
        exportDate: new Date().toISOString()
      };

      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `portal_historia_progresso_${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      backgroundProcessor.updateStatus('📊 Dados exportados');
    }

    // Tracking de seções
    let currentSectionStartTime = Date.now();

    // Alternar seções (modificado para incluir tracking)
    function showSection(sectionId) {
      // Salvar tempo da seção anterior
      const currentTime = Date.now();
      const currentSection = document.querySelector('.section.active')?.id;
      if (currentSection) {
        const timeSpent = currentTime - currentSectionStartTime;
        progressData.sectionTime[currentSection] = (progressData.sectionTime[currentSection] || 0) + timeSpent;
      }

      // Alternar seções
      const sections = document.getElementsByClassName("section");
      for (let sec of sections) {
        sec.classList.remove("active");
      }
      document.getElementById(sectionId).classList.add("active");
      window.scrollTo(0, 0);

      // Tracking de progresso
      progressData.sectionsVisited.add(sectionId);
      progressData.lastActivity = `Visitou seção: ${sectionId}`;
      currentSectionStartTime = currentTime;

      // Auto-save
      backgroundProcessor.addTask('saveProgress', () => saveProgressData());
      setTimeout(() => backgroundProcessor.runTask('saveProgress'), 1000);

      // Atualizar display se estiver na seção de progresso
      if (sectionId === 'progresso') {
        updateProgressDisplay();
      }
    }

    // Síntese de fala para acessibilidade
    function speakText(text) {
      if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'pt-BR';
        window.speechSynthesis.speak(msg);
      } else {
        alert("Seu navegador não suporta síntese de fala.");
      }
    }

    /* ======== Quiz de História ========= */
    const quizPerguntas = [
      { pergunta: "Quem foi o primeiro imperador do Brasil?", respostas: ["Dom Pedro I", "Dom João VI"], correta: 0 },
      { pergunta: "Qual civilização é conhecida como 'berço da democracia'?", respostas: ["Roma", "Grécia"], correta: 1 },
      { pergunta: "A Idade Média foi marcada principalmente por qual sistema econômico?", respostas: ["Feudalismo", "Capitalismo"], correta: 0 },
      { pergunta: "Quem pintou a Mona Lisa?", respostas: ["Michelangelo", "Leonardo da Vinci"], correta: 1 }
    ];
    let quizIndice = 0;
    let quizPontuacao = 0;
    function startQuiz() {
      quizIndice = 0;
      quizPontuacao = 0;
      document.getElementById("resultadoQuiz").innerText = "";
      mostrarPerguntaQuiz();
    }
    function mostrarPerguntaQuiz() {
      if (quizIndice < quizPerguntas.length) {
        const quest = quizPerguntas[quizIndice];
        document.getElementById("quizPergunta").innerText = quest.pergunta;
        document.getElementById("resposta1").innerText = quest.respostas[0];
        document.getElementById("resposta2").innerText = quest.respostas[1];
        document.getElementById("resposta1").style.display = "inline-block";
        document.getElementById("resposta2").style.display = "inline-block";
        document.getElementById("resposta1").onclick = () => checarRespostaQuiz(0);
        document.getElementById("resposta2").onclick = () => checarRespostaQuiz(1);
      }
    }
    function checarRespostaQuiz(r) {
      const quest = quizPerguntas[quizIndice];
      if (r === quest.correta) {
        alert("Muito bem! Resposta certa.");
        quizPontuacao++;
      } else {
        alert("Ops, resposta errada.");
      }
      quizIndice++;
      if (quizIndice < quizPerguntas.length) {
        mostrarPerguntaQuiz();
      } else {
        exibirResultadoQuiz();
      }
    }
    function exibirResultadoQuiz() {
      document.getElementById("quizPergunta").innerText = "";
      document.getElementById("resposta1").style.display = "none";
      document.getElementById("resposta2").style.display = "none";
      
      const scorePercentage = Math.round((quizPontuacao / quizPerguntas.length) * 100);
      document.getElementById("resultadoQuiz").innerText = `Você acertou ${quizPontuacao} de ${quizPerguntas.length} perguntas! (${scorePercentage}%)`;
      
      // Atualizar progresso
      progressData.quizCompleted = true;
      progressData.quizScore = scorePercentage;
      progressData.lastActivity = `Completou quiz com ${scorePercentage}% de acertos`;
      
      // Verificar conquistas
      checkAchievements();
      
      // Auto-save
      backgroundProcessor.updateStatus('💾 Salvando resultado do quiz...');
      saveProgressData();
      
      const restartButton = document.createElement("button");
      restartButton.innerText = "Reiniciar Quiz";
      restartButton.onclick = startQuiz;
      document.getElementById("resultadoQuiz").appendChild(restartButton);
    }

    /* ======== Contação de Histórias Interativa ========= */
    const storyChapters = [
      {
        titulo: "Capítulo 1: A Partida",
        texto: "Em 1500, os navegadores portugueses zarparam em direção ao desconhecido, iniciando a aventura que levaria à descoberta do Brasil.",
        imagem: "media/cabral_ship.jpg"
      },
      {
        titulo: "Capítulo 2: A Chegada",
        texto: "Após uma longa viagem, a frota avistou novas terras e iniciou o contato com os povos indígenas, dando início a uma história de encontros e desafios.",
        imagem: "media/map_brazil_colonial.jpg"
      },
      {
        titulo: "Capítulo 3: A Transformação",
        texto: "Com o tempo, a nova terra passou por profundas transformações culturais, econômicas e sociais, moldando a identidade de um país em construção.",
        imagem: "media/great_pyramid_of_giza.jpg"
      }
    ];
    let currentChapter = 0;
    function displayChapter() {
      const container = document.getElementById("storyContainer");
      const chapter = storyChapters[currentChapter];
      container.innerHTML = `
        <h3>${chapter.titulo}</h3>
        <p>${chapter.texto}</p>
        <div class="image-container">
          <img src="${chapter.imagem}" alt="${chapter.titulo}">
        </div>
      `;
    }
    function nextChapter() {
      if (currentChapter < storyChapters.length - 1) {
        currentChapter++;
        displayChapter();
        
        // Atualizar progresso de leitura
        progressData.storiesRead = Math.max(progressData.storiesRead, currentChapter + 1);
        progressData.lastActivity = `Leu capítulo ${currentChapter + 1}`;
        
        // Verificar conquistas
        checkAchievements();
        
        // Auto-save em background
        backgroundProcessor.addTask('saveStoryProgress', () => {
          backgroundProcessor.updateStatus('📖 Salvando progresso da história...');
          saveProgressData();
        });
        setTimeout(() => backgroundProcessor.runTask('saveStoryProgress'), 500);
      }
    }
    function prevChapter() {
      if (currentChapter > 0) {
        currentChapter--;
        displayChapter();
        
        // Tracking de navegação
        progressData.lastActivity = `Voltou para capítulo ${currentChapter + 1}`;
      }
    }
    function speakStory() {
      const chapter = storyChapters[currentChapter];
      speakText(chapter.texto);
    }
    // Inicializa o primeiro capítulo
    displayChapter();

    /* ======== Linha do Tempo Interativa ========= */
    const eras = {
      pre: {
        titulo: "Pré-História",
        descricao: "Período anterior à escrita, marcado pelas primeiras manifestações culturais e artísticas do homem.",
        imagem: "media/prehistoric.jpg"
      },
      antiguidade: {
        titulo: "Antiguidade",
        descricao: "Época das grandes civilizações como a Egípcia, Grega e Romana, que estabeleceram as bases da cultura ocidental.",
        imagem: "media/ancient.jpg"
      },
      media: {
        titulo: "Idade Média",
        descricao: "Período marcado pelo feudalismo, pela influência da Igreja e por importantes transformações culturais na Europa.",
        imagem: "media/medieval.jpg"
      },
      moderna: {
        titulo: "Idade Moderna",
        descricao: "Período de grandes descobertas, revoluções e o surgimento dos Estados modernos.",
        imagem: "media/renaissance.jpg"
      },
      contemporanea: {
        titulo: "Idade Contemporânea",
        descricao: "Época atual, marcada por avanços tecnológicos, transformações sociais e a globalização.",
        imagem: "media/modern.jpg"
      }
    };
    function showEra(eraKey) {
      const era = eras[eraKey];
      const container = document.getElementById("eraContainer");
      container.innerHTML = `
        <h3>${era.titulo}</h3>
        <p>${era.descricao}</p>
        <div class="image-container">
          <img src="${era.imagem}" alt="${era.titulo}">
        </div>
        <button onclick="speakText('${era.descricao}')" aria-label="Ouvir ${era.titulo}">Ouvir ${era.titulo}</button>
      `;
    }

    /* ======== Jogo de Memória ========= */
    const memoryCardsData = [
      { id: 1, conteudo: "⛵", descricao: "Navio de Cabral" },
      { id: 2, conteudo: "🏺", descricao: "Vaso Antigo" },
      { id: 3, conteudo: "🏰", descricao: "Castelo Medieval" },
      { id: 4, conteudo: "🗿", descricao: "Escultura Histórica" }
    ];
    let memoryCards = [];
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    function shuffle(array) {
      array.sort(() => Math.random() - 0.5);
    }
    function generateMemoryCards() {
      memoryCards = [...memoryCardsData, ...memoryCardsData]; // duplicar os pares
      shuffle(memoryCards);
      const gameContainer = document.getElementById("memoryGame");
      gameContainer.innerHTML = "";
      memoryCards.forEach((card, index) => {
        const cardElement = document.createElement("div");
        cardElement.classList.add("memory-card");
        cardElement.setAttribute("data-id", card.id);
        cardElement.setAttribute("aria-label", "Carta virada");
        cardElement.innerText = "";
        cardElement.onclick = () => flipCard(cardElement, index);
        gameContainer.appendChild(cardElement);
      });
    }
    function flipCard(cardElement, index) {
      if (lockBoard || cardElement.classList.contains("flipped")) return;
      cardElement.classList.add("flipped");
      cardElement.innerText = memoryCards[index].conteudo;
      if (!firstCard) {
        firstCard = { cardElement, index };
      } else {
        secondCard = { cardElement, index };
        checkForMatch();
      }
    }
    function checkForMatch() {
      const isMatch = memoryCards[firstCard.index].id === memoryCards[secondCard.index].id;
      if (isMatch) {
        firstCard.cardElement.classList.add("matched");
        secondCard.cardElement.classList.add("matched");
        resetMemorySelection();
        
        // Verificar se o jogo foi completado
        const allMatched = document.querySelectorAll('.memory-card.matched').length === memoryCards.length;
        if (allMatched) {
          progressData.gamesPlayed.add('memoria');
          progressData.lastActivity = 'Completou o jogo de memória';
          
          // Notificação de sucesso
          setTimeout(() => {
            backgroundProcessor.updateStatus('🎉 Jogo de memória completado!');
            checkAchievements();
            saveProgressData();
          }, 500);
        }
      } else {
        lockBoard = true;
        setTimeout(() => {
          firstCard.cardElement.classList.remove("flipped");
          firstCard.cardElement.innerText = "";
          secondCard.cardElement.classList.remove("flipped");
          secondCard.cardElement.innerText = "";
          resetMemorySelection();
        }, 1000);
      }
    }
    function resetMemorySelection() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }
    function resetMemoryGame() {
      generateMemoryCards();
    }
    // Inicializa o jogo de memória
    generateMemoryCards();

    /* ======== Conversor Braille ========= */
    const brailleMap = {
      'a': '⠁', 'b': '⠃', 'c': '⠉', 'd': '⠙', 'e': '⠑', 'f': '⠋', 'g': '⠛',
      'h': '⠓', 'i': '⠊', 'j': '⠚', 'k': '⠅', 'l': '⠇', 'm': '⠍', 'n': '⠝',
      'o': '⠕', 'p': '⠏', 'q': '⠟', 'r': '⠗', 's': '⠎', 't': '⠞', 'u': '⠥',
      'v': '⠧', 'w': '⠺', 'x': '⠭', 'y': '⠽', 'z': '⠵',
      '1': '⠼⠁', '2': '⠼⠃', '3': '⠼⠉', '4': '⠼⠙', '5': '⠼⠑',
      '6': '⠼⠋', '7': '⠼⠛', '8': '⠼⠓', '9': '⠼⠊', '0': '⠼⠚',
      '.': '⠲', ',': '⠂', '?': '⠦', '!': '⠖', ' ': ' '
    };
    function converterParaBraille() {
      let input = document.getElementById('brailleInput').value;
      let output = '';
      for (let c of input.toLowerCase()) {
        output += brailleMap[c] || c;
      }
      document.getElementById('brailleOutput').innerText = output;
    }

    /* ======== Inicialização do Sistema ========= */
    
    // Inicializar quando a página carregar
    document.addEventListener('DOMContentLoaded', function() {
      // Carregar dados salvos
      loadProgressData();
      
      // Iniciar processamento em background
      backgroundProcessor.start();
      
      // Inicializar outros componentes
      displayChapter();
      generateMemoryCards();
      
      // Marcar página inicial como visitada
      progressData.sectionsVisited.add('home');
      progressData.lastActivity = 'Iniciou sessão no portal';
      currentSectionStartTime = Date.now();
      
      console.log('🚀 Portal Interativo de História inicializado com sistema de progresso!');
    });

    // Salvar progresso antes de sair da página
    window.addEventListener('beforeunload', function() {
      // Salvar tempo da seção atual
      const currentSection = document.querySelector('.section.active')?.id;
      if (currentSection) {
        const timeSpent = Date.now() - currentSectionStartTime;
        progressData.sectionTime[currentSection] = (progressData.sectionTime[currentSection] || 0) + timeSpent;
      }
      
      // Salvar dados finais
      saveProgressData();
    });

    // Adicionar animações CSS dinamicamente
    const style = document.createElement('style');
    style.textContent = `
      @keyframes bounceIn {
        0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.05); }
        70% { transform: translate(-50%, -50%) scale(0.9); }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      }
      @keyframes bounceOut {
        0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
  
</body>
</html>
