<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Interativo de Hist√≥ria - Vers√£o Inclusiva</title>
  <meta name="description" content="Portal Interativo de Hist√≥ria com conte√∫dos reais e interativos para crian√ßas, incluindo recursos para defici√™ncias visuais, auditivas, autismo e outras necessidades.">
  <meta name="keywords" content="Hist√≥ria, Brasil, Mitologia Grega, Hist√≥ria Antiga, Educa√ß√£o, Inclus√£o, Libras, Braille, Linha do Tempo, Jogo de Mem√≥ria">
  <meta name="author" content="Gabriel Silveira Lima, Jordana Fran√ßa Soares">
  <style>
    /* Reset e estilos gerais */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      line-height: 1.6;
      padding-bottom: 80px;
      text-align: center;
    }
    header {
      background-color: #2c3e50;
      padding: 15px;
      color: #fff;
      text-align: center;
    }
    nav ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 0;
      margin: 0;
    }
    nav ul li { margin: 8px; }
    nav ul li a {
      text-decoration: none;
      color: #fff;
      font-size: 16px;
      transition: transform 0.3s ease;
    }
    nav ul li a:hover {
      transform: scale(1.1);
      text-decoration: underline;
    }
    .container {
      max-width: 950px;
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: left;
    }
    .section {
      display: none;
      margin-bottom: 40px;
      text-align: left;
    }
    .section.active {
      display: block;
      animation: fadeIn 0.6s forwards;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    h2 {
      color: #2c3e50;
      border-bottom: 2px solid #2c3e50;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }
    p { font-size: 17px; margin-bottom: 15px; text-align: justify; }
    .image-container {
      margin: 20px 0;
      text-align: center;
    }
    .image-container img {
      width: 100%;
      max-height: 300px;
      border-radius: 10px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .image-container img:hover { transform: scale(1.02); }
    iframe, video, audio {
      width: 100%;
      margin-top: 10px;
      border: none;
    }
    button {
      background-color: #3498db;
      border: none;
      color: #fff;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      margin: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    button:hover { background-color: #2980b9; transform: scale(1.05); }
    footer {
      background-color: #2c3e50;
      color: #fff;
      text-align: center;
      padding: 15px;
      font-size: 14px;
      position: fixed;
      width: 100%;
      bottom: 0;
    }
    .references { margin-top: 15px; font-size: 0.9em; }
    .references ul { list-style-type: circle; margin-left: 40px; }
    .curiosidades {
      background-color: #ecf0f1;
      padding: 10px;
      border-radius: 5px;
      margin: 20px 0;
    }
    .curiosidades h4 { color: #2980b9; margin-bottom: 10px; }
    .curiosidades ul { list-style-type: square; margin-left: 40px; }
    /* Estilos para Conta√ß√£o de Hist√≥rias */
    .story-container { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-top: 10px; }
    .story-controls { text-align: center; margin-top: 10px; }
    /* Estilos para Linha do Tempo Interativa */
    .timeline-container { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-top: 10px; }
    .timeline-buttons { display: flex; justify-content: space-around; margin-bottom: 15px; }
    .timeline-buttons button { flex: 1; margin: 5px; }
    /* Estilos para Jogo de Mem√≥ria */
    .memory-game { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; }
    .memory-card {
      background-color: #2980b9;
      color: #fff;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.3s ease;
    }
    .memory-card.flipped { background-color: #27ae60; transform: rotateY(180deg); }
    .memory-card.matched { background-color: #7f8c8d; cursor: default; }
    /* Estilos para Dashboard de Progresso */
    .progress-dashboard {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      color: white;
      position: relative;
      overflow: hidden;
    }
    .progress-dashboard::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
      animation: float 20s infinite linear;
    }
    @keyframes float {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-100px); }
    }
    .progress-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .progress-item {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      backdrop-filter: blur(10px);
    }
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #45a049);
      border-radius: 4px;
      transition: width 0.5s ease;
      position: relative;
    }
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background-image: linear-gradient(45deg, transparent 35%, rgba(255,255,255,.2) 35%, rgba(255,255,255,.2) 65%, transparent 65%, transparent);
      background-size: 20px 20px;
      animation: progress-animate 1s linear infinite;
    }
    @keyframes progress-animate {
      0% { background-position: 0 0; }
      100% { background-position: 20px 0; }
    }
    .badge {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      margin: 2px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .background-status {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 15px;
      border-radius: 25px;
      font-size: 12px;
      z-index: 1000;
      transition: all 0.3s ease;
      transform: translateX(100%);
    }
    .background-status.active {
      transform: translateX(0);
    }
    .loading-spinner {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid #ffffff33;
      border-top: 2px solid #ffffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* Responsividade */
    @media (max-width: 600px) {
      nav ul { flex-direction: column; }
      .container { padding: 10px; }
      header, footer { padding: 10px; }
      .memory-game { grid-template-columns: repeat(2, 1fr); }
      .progress-summary { grid-template-columns: 1fr; }
      .background-status { bottom: 80px; right: 10px; }
    }
  </style>
</head>
<body>

  <!-- Cabe√ßalho e Navega√ß√£o -->
  <header>
    <h1>Portal Interativo de Hist√≥ria</h1>
    <nav>
      <ul>
        <li><a href="#" onclick="showSection('home')" aria-label="Home">Home</a></li>
        <li><a href="#" onclick="showSection('brasil')" aria-label="Hist√≥ria do Brasil">Hist√≥ria do Brasil</a></li>
        <li><a href="#" onclick="showSection('grega')" aria-label="Mitologia Grega">Mitologia Grega</a></li>
        <li><a href="#" onclick="showSection('antiga')" aria-label="Hist√≥ria Antiga">Hist√≥ria Antiga</a></li>
        <li><a href="#" onclick="showSection('comunicacao')" aria-label="Comunica√ß√£o Inclusiva">Comunica√ß√£o Inclusiva</a></li>
        <li><a href="#" onclick="showSection('libras')" aria-label="Libras">Libras</a></li>
        <li><a href="#" onclick="showSection('quiz')" aria-label="Quiz de Hist√≥ria">Quiz de Hist√≥ria</a></li>
        <li><a href="#" onclick="showSection('atividades')" aria-label="Atividades Interativas">Atividades Interativas</a></li>
        <li><a href="#" onclick="showSection('historias')" aria-label="Conta√ß√£o de Hist√≥rias">Conta√ß√£o de Hist√≥rias</a></li>
        <li><a href="#" onclick="showSection('timeline')" aria-label="Linha do Tempo">Linha do Tempo</a></li>
        <li><a href="#" onclick="showSection('memoria')" aria-label="Jogo de Mem√≥ria">Jogo de Mem√≥ria</a></li>
        <li><a href="#" onclick="showSection('autores')" aria-label="Sobre os Autores">Sobre os Autores</a></li>
        <li><a href="#" onclick="showSection('progresso')" aria-label="Meu Progresso">Meu Progresso</a></li>
        <li><a href="#" onclick="showSection('braille')" aria-label="Conversor Braille">Conversor Braille</a></li>
      </ul>
    </nav>
  </header>

  <!-- Conte√∫do Principal -->
  <div class="container">
    
    <!-- Se√ß√£o Home -->
    <section id="home" class="section active">
      <h2>Bem-vindo ao Portal de Hist√≥ria</h2>
      <p>
        Explore conte√∫dos interativos e educativos sobre Hist√≥ria do Brasil, Mitologia Grega, Hist√≥ria Antiga e muito mais. Nosso portal promove a inclus√£o com recursos para crian√ßas com defici√™ncias visuais, auditivas, de fala, autismo e outras necessidades.
      </p>
      <div class="image-container">
        <!-- Imagem do Navio de Cabral -->
        <img src="media/cabral_ship.jpg" alt="Navio de Cabral navegando">
      </div>
      <!-- V√≠deo introdut√≥rio com legendas e audiodescri√ß√£o -->
      <video controls>
        <source src="media/intro.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
      <!-- √Åudio introdut√≥rio -->
      <audio controls>
        <source src="media/intro.mp3" type="audio/mp3">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <button aria-label="Ouvir Introdu√ß√£o" onclick="speakText('Bem-vindo ao Portal de Hist√≥ria. Explore conte√∫dos interativos e educativos.')">Ouvir Introdu√ß√£o</button>
    </section>

    <!-- Se√ß√£o Hist√≥ria do Brasil -->
    <section id="brasil" class="section">
      <h2>Hist√≥ria do Brasil</h2>
      <p>
        A Hist√≥ria do Brasil inicia-se com a chegada dos portugueses em 1500, comandados por Pedro √Ålvares Cabral. Durante o per√≠odo colonial, a economia era impulsionada pela extra√ß√£o do pau‚Äëbrasil, produ√ß√£o de a√ß√∫car e minera√ß√£o ‚Äì sustentada pela m√£o de obra escrava. Em 1822, o pa√≠s conquistou a independ√™ncia, pavimentando o caminho para a Rep√∫blica.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>Antes da chegada dos colonizadores, diversos povos ind√≠genas habitavam o territ√≥rio.</li>
          <li>O pau‚Äëbrasil foi um dos primeiros produtos de exporta√ß√£o.</li>
          <li>A Lei √Åurea, de 1888, aboliu oficialmente a escravid√£o.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem do Mapa do Brasil Colonial -->
        <img src="media/map_brazil_colonial.jpg" alt="Mapa do Brasil Colonial">
      </div>
      <!-- V√≠deo educativo sobre Hist√≥ria do Brasil -->
      <video controls>
        <source src="media/historia_brasil.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
      <!-- √Åudio narrativo do per√≠odo colonial -->
      <audio controls>
        <source src="media/historia_brasil.mp3" type="audio/mp3">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <button aria-label="Ouvir Hist√≥ria do Brasil" onclick="speakText('Conhe√ßa a trajet√≥ria do Brasil, desde as civiliza√ß√µes ind√≠genas at√© a forma√ß√£o da Rep√∫blica.')">Ouvir Hist√≥ria do Brasil</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Fausto, B. ‚Äì <em>Hist√≥ria do Brasil</em>, EdUSP, 2016.</li>
          <li><a href="https://www.bn.gov.br/" target="_blank">Biblioteca Nacional</a></li>
        </ul>
      </div>
    </section>

    <!-- Se√ß√£o Mitologia Grega -->
    <section id="grega" class="section">
      <h2>Mitologia Grega</h2>
      <p>
        A mitologia grega re√∫ne lendas que explicam a origem do mundo e os valores humanos por meio das hist√≥rias de deuses, her√≥is e criaturas fant√°sticas. Obras cl√°ssicas, como <em>A Il√≠ada</em> e <em>A Odisseia</em>, narram os feitos de Zeus, H√©rcules, Atena e outros.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>O Monte Olimpo era considerado a morada dos deuses.</li>
          <li>H√©rcules √© celebrado por seus doze trabalhos.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem dos Deuses do Olimpo -->
        <img src="media/zeus_olympus.jpg" alt="Representa√ß√£o dos deuses do Olimpo">
      </div>
      <!-- V√≠deo educativo sobre Mitologia Grega -->
      <video controls>
        <source src="media/mitologia_grega.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
      <!-- √Åudio narrativo sobre mitos gregos -->
      <audio controls>
        <source src="media/mitologia_grega.mp3" type="audio/mp3">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <button aria-label="Ouvir Mitologia Grega" onclick="speakText('Explore os mitos e lendas da Gr√©cia Antiga, com hist√≥rias de deuses e her√≥is.')">Ouvir Mitologia Grega</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Homero ‚Äì <em>A Il√≠ada</em> e <em>A Odisseia</em>.</li>
          <li>Graves, R. ‚Äì <em>Os Mitos Gregos</em>, Nova Fronteira, 2013.</li>
        </ul>
      </div>
    </section>

    <!-- Se√ß√£o Hist√≥ria Antiga -->
    <section id="antiga" class="section">
      <h2>Hist√≥ria Antiga</h2>
      <p>
        A Hist√≥ria Antiga aborda o surgimento das primeiras civiliza√ß√µes ‚Äì do Egito, com suas pir√¢mides e hier√≥glifos, √† Mesopot√¢mia, ber√ßo da escrita, passando pelos imp√©rios grego e romano, que lan√ßaram as bases da cultura e do direito ocidental.
      </p>
      <div class="curiosidades">
        <h4>Curiosidades</h4>
        <ul>
          <li>O C√≥digo de Hamur√°bi √© um dos primeiros conjuntos de leis registrados.</li>
          <li>O Egito √© famoso por suas imponentes pir√¢mides e pela escrita hierogl√≠fica.</li>
        </ul>
      </div>
      <div class="image-container">
        <!-- Imagem da Pir√¢mide de Giz√© -->
        <img src="media/great_pyramid_of_giza.jpg" alt="Pir√¢mide de Giz√©">
      </div>
      <!-- V√≠deo educativo sobre Civiliza√ß√µes da Antiguidade -->
      <video controls>
        <source src="media/civilizacoes_antigas.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
      <!-- √Åudio explicativo sobre a inven√ß√£o da escrita -->
      <audio controls>
        <source src="media/civilizacoes_antigas.mp3" type="audio/mp3">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <button aria-label="Ouvir Hist√≥ria Antiga" onclick="speakText('Descubra as civiliza√ß√µes antigas que moldaram o mundo, como os eg√≠pcios, mesopot√¢micos, gregos e romanos.')">Ouvir Hist√≥ria Antiga</button>
      <div class="references">
        <h4>Fontes</h4>
        <ul>
          <li>Gon√ßalves, E. ‚Äì <em>Hist√≥ria Antiga: Egito e Mesopot√¢mia</em>, Contexto, 2019.</li>
          <li>Bernardini, C. ‚Äì <em>Mundo Antigo: Gr√©cia e Roma</em>, Sulina, 2020.</li>
        </ul>
      </div>
    </section>

    <!-- Se√ß√£o Comunica√ß√£o Inclusiva -->
    <section id="comunicacao" class="section">
      <h2>Comunica√ß√£o Inclusiva</h2>
      <p>
        A comunica√ß√£o inclusiva √© essencial para que todas as crian√ßas tenham acesso √† educa√ß√£o. Utilizamos legendas, audiodescri√ß√£o, Libras e adapta√ß√µes visuais para garantir a compreens√£o de todos.
      </p>
      <div class="image-container">
        <!-- Imagem para Comunica√ß√£o Inclusiva -->
        <img src="media/comunicacao_inclusiva.jpg" alt="Ilustra√ß√£o de comunica√ß√£o inclusiva">
      </div>
      <button aria-label="Ouvir Comunica√ß√£o Inclusiva" onclick="speakText('Entenda a import√¢ncia da comunica√ß√£o inclusiva para promover a participa√ß√£o de todos.')">Ouvir Comunica√ß√£o Inclusiva</button>
    </section>

    <!-- Se√ß√£o Libras -->
    <section id="libras" class="section">
      <h2>Libras ‚Äì L√≠ngua Brasileira de Sinais</h2>
      <p>
        Assista a v√≠deos com interpreta√ß√£o em Libras para acompanhar o conte√∫do de forma acess√≠vel. Essa se√ß√£o foi desenvolvida para atender crian√ßas surdas ou com defici√™ncia auditiva.
      </p>
      <div class="image-container">
        <!-- Imagem para Libras -->
        <img src="media/libras.jpg" alt="Interpreta√ß√£o em Libras">
      </div>
      <video controls>
        <source src="media/libras.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
      <button aria-label="Ouvir Libras" onclick="speakText('Assista ao v√≠deo com interpreta√ß√£o em Libras para acompanhar o conte√∫do.')">Ouvir Libras</button>
    </section>

    <!-- Se√ß√£o Quiz de Hist√≥ria -->
    <section id="quiz" class="section">
      <h2>Quiz de Hist√≥ria</h2>
      <p>Teste seus conhecimentos de forma interativa!</p>
      <div class="quiz-container">
        <button aria-label="Iniciar Quiz" onclick="startQuiz()">Iniciar Quiz</button>
        <p id="quizPergunta"></p>
        <button id="resposta1"></button>
        <button id="resposta2"></button>
        <p id="resultadoQuiz"></p>
      </div>
    </section>

    <!-- Se√ß√£o Atividades Interativas -->
    <section id="atividades" class="section">
      <h2>Atividades Interativas</h2>
      <p>
        Divirta-se e aprenda com atividades l√∫dicas! Explore desafios que estimulam a criatividade e o racioc√≠nio.
      </p>
      <button onclick="alert('Atividade: Complete a imagem! (Implementa√ß√£o futura.)')" aria-label="Completar Imagem">Completar Imagem</button>
      <button onclick="alert('Atividade: Relacione os fatos hist√≥ricos! (Exemplo de atividade interativa.)')" aria-label="Relacionar Fatos">Relacionar Fatos</button>
      <button onclick="alert('Atividade: Quebra-cabe√ßa hist√≥rico! (Implementa√ß√£o futura.)')" aria-label="Quebra-Cabe√ßa Hist√≥rico">Quebra-Cabe√ßa Hist√≥rico</button>
    </section>

    <!-- Se√ß√£o Conta√ß√£o de Hist√≥rias -->
    <section id="historias" class="section">
      <h2>Conta√ß√£o de Hist√≥rias</h2>
      <p>Participe de uma aventura interativa! Navegue pelos cap√≠tulos da hist√≥ria "A Aventura de Cabral".</p>
      <div class="story-container" id="storyContainer">
        <!-- Cap√≠tulo atual ser√° exibido aqui -->
      </div>
      <div class="story-controls">
        <button onclick="prevChapter()" aria-label="Cap√≠tulo Anterior">Anterior</button>
        <button onclick="nextChapter()" aria-label="Pr√≥ximo Cap√≠tulo">Pr√≥ximo</button>
        <button onclick="speakStory()" aria-label="Ouvir Hist√≥ria Atual">Ouvir Hist√≥ria</button>
      </div>
      <video controls>
        <source src="media/historia_libras.mp4" type="video/mp4">
        Seu navegador n√£o suporta o v√≠deo.
      </video>
    </section>

    <!-- Se√ß√£o Linha do Tempo Interativa -->
    <section id="timeline" class="section">
      <h2>Linha do Tempo Interativa</h2>
      <p>Explore diferentes eras da hist√≥ria atrav√©s desta linha do tempo interativa.</p>
      <div class="timeline-buttons">
        <button onclick="showEra('pre')" aria-label="Pr√©-Hist√≥ria">Pr√©-Hist√≥ria</button>
        <button onclick="showEra('antiguidade')" aria-label="Antiguidade">Antiguidade</button>
        <button onclick="showEra('media')" aria-label="Idade M√©dia">Idade M√©dia</button>
        <button onclick="showEra('moderna')" aria-label="Idade Moderna">Idade Moderna</button>
        <button onclick="showEra('contemporanea')" aria-label="Idade Contempor√¢nea">Idade Contempor√¢nea</button>
      </div>
      <div class="timeline-container" id="eraContainer">
        <p>Selecione uma era para visualizar detalhes.</p>
      </div>
    </section>

    <!-- Se√ß√£o Jogo de Mem√≥ria -->
    <section id="memoria" class="section">
      <h2>Jogo de Mem√≥ria</h2>
      <p>Encontre os pares correspondentes e aprenda sobre √≠cones hist√≥ricos.</p>
      <div class="memory-game" id="memoryGame">
        <!-- Cartas ser√£o geradas dinamicamente -->
      </div>
      <button onclick="resetMemoryGame()" aria-label="Reiniciar Jogo de Mem√≥ria">Reiniciar Jogo</button>
    </section>

    <!-- Se√ß√£o Sobre os Autores -->
    <section id="autores" class="section">
      <h2>Sobre os Autores</h2>
      <div class="author-info">
        <div>
          <h3>Gabriel Silveira Lima</h3>
          <p>Especialista em Seguran√ßa P√∫blica, Bacharel em Direito e Bacharelando em Ci√™ncia da Computa√ß√£o, com experi√™ncia em ciberseguran√ßa e hacking √©tico.</p>
        </div>
        <div>
          <h3>Jordana Fran√ßa Soares</h3>
          <p>Licencianda em Hist√≥ria com √™nfase em metodologias interativas e educacionais, atuante em projetos de inclus√£o e comunica√ß√£o acess√≠vel.</p>
        </div>
      </div>
      <audio controls>
        <source src="media/autores.mp3" type="audio/mp3">
        Seu navegador n√£o suporta √°udio.
      </audio>
      <button aria-label="Ouvir Sobre os Autores" onclick="speakText('Conhe√ßa os autores: Gabriel Silveira Lima e Jordana Fran√ßa Soares.')">Ouvir Sobre os Autores</button>
    </section>

    <!-- Se√ß√£o Dashboard de Progresso -->
    <section id="progresso" class="section">
      <h2>Meu Progresso de Aprendizagem</h2>
      <div class="progress-dashboard">
        <h3>üéØ Painel de Progresso</h3>
        <p>Acompanhe seu progresso atrav√©s do Portal Interativo de Hist√≥ria</p>
        
        <div class="progress-summary">
          <div class="progress-item">
            <h4>üìö Se√ß√µes Visitadas</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="sectionsProgress" style="width: 0%"></div>
            </div>
            <span id="sectionsCount">0 de 12</span>
          </div>
          
          <div class="progress-item">
            <h4>üéÆ Quiz Completado</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
            </div>
            <span id="quizScore">0% de acertos</span>
          </div>
          
          <div class="progress-item">
            <h4>üìñ Hist√≥rias Lidas</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="storiesProgress" style="width: 0%"></div>
            </div>
            <span id="storiesCount">0 de 3 cap√≠tulos</span>
          </div>
          
          <div class="progress-item">
            <h4>üß† Jogos Jogados</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="gamesProgress" style="width: 0%"></div>
            </div>
            <span id="gamesCount">0 jogos completados</span>
          </div>
        </div>
        
        <div style="margin-top: 20px;">
          <h4>üèÜ Conquistas Desbloqueadas</h4>
          <div id="badgesContainer">
            <!-- Badges ser√£o adicionadas dinamicamente -->
          </div>
        </div>
        
        <div style="margin-top: 15px; text-align: center;">
          <button onclick="resetProgress()" aria-label="Resetar Progresso">üîÑ Resetar Progresso</button>
          <button onclick="exportProgress()" aria-label="Exportar Progresso">üìä Exportar Dados</button>
        </div>
      </div>
      
      <div style="margin-top: 20px;">
        <h3>üìà Estat√≠sticas Detalhadas</h3>
        <div id="detailedStats">
          <p><strong>Tempo total no portal:</strong> <span id="totalTime">0 minutos</span></p>
          <p><strong>√öltima atividade:</strong> <span id="lastActivity">Nenhuma</span></p>
          <p><strong>Se√ß√£o favorita:</strong> <span id="favoriteSection">Em an√°lise...</span></p>
          <p><strong>Streak de aprendizado:</strong> <span id="learningStreak">0 dias</span></p>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o Conversor Braille -->
    <section id="braille" class="section">
      <h2>Conversor Braille</h2>
      <p>Digite um texto para convert√™-lo em Braille (simplificado), facilitando a leitura para pessoas com defici√™ncia visual.</p>
      <div class="braille-container">
        <textarea id="brailleInput" rows="2" placeholder="Digite um texto..." aria-label="Entrada de texto para Braille"></textarea><br>
        <button onclick="converterParaBraille()" aria-label="Converter para Braille">Converter para Braille</button>
        <div id="brailleOutput" class="braille-output" style="font-size: 20px; margin-top: 10px;"></div>
      </div>
    </section>

  </div>

  <!-- Indicador de Status de Processamento em Segundo Plano -->
  <div id="backgroundStatus" class="background-status">
    <span class="loading-spinner"></span>
    <span id="statusText">Inicializando...</span>
  </div>

  <!-- Rodap√© -->
  <footer>
    <p>&copy; 2025 Portal Interativo de Hist√≥ria - Todos os direitos reservados.</p>
  </footer>

  <!-- Scripts JavaScript -->
  <script>
    /* ======== Sistema de Progresso e Processamento em Segundo Plano ========= */
    
    // Configura√ß√µes globais
    const STORAGE_KEY = 'portal_historia_progress';
    const BACKGROUND_TASKS = [];
    let backgroundWorker = null;
    let progressData = {
      sectionsVisited: new Set(),
      quizCompleted: false,
      quizScore: 0,
      storiesRead: 0,
      gamesPlayed: new Set(),
      badges: new Set(),
      totalTime: 0,
      lastActivity: null,
      sectionTime: {},
      startTime: Date.now()
    };

    // Sistema de Background Processing
    class BackgroundProcessor {
      constructor() {
        this.tasks = new Map();
        this.isRunning = false;
        this.statusElement = document.getElementById('backgroundStatus');
        this.statusText = document.getElementById('statusText');
      }

      start() {
        this.isRunning = true;
        this.statusElement.classList.add('active');
        this.updateStatus('Sistema iniciado');
        
        // Auto-save a cada 30 segundos
        setInterval(() => this.autoSave(), 30000);
        
        // Preload de conte√∫do
        setTimeout(() => this.preloadContent(), 2000);
        
        // Analytics em background
        setInterval(() => this.collectAnalytics(), 60000);
        
        // Oculta√ß√£o autom√°tica do status ap√≥s 3 segundos
        setTimeout(() => {
          this.statusElement.classList.remove('active');
        }, 3000);
      }

      updateStatus(message) {
        this.statusText.textContent = message;
        this.statusElement.classList.add('active');
        
        setTimeout(() => {
          this.statusElement.classList.remove('active');
        }, 2000);
      }

      autoSave() {
        this.updateStatus('üíæ Salvando progresso...');
        saveProgressData();
      }

      preloadContent() {
        this.updateStatus('‚ö° Carregando conte√∫do...');
        
        // Simula preload de imagens e conte√∫do
        const mediaElements = ['cabral_ship.jpg', 'map_brazil_colonial.jpg', 'great_pyramid_of_giza.jpg'];
        mediaElements.forEach(media => {
          const img = new Image();
          img.src = `media/${media}`;
        });
      }

      collectAnalytics() {
        // Atualiza tempo total
        progressData.totalTime = Math.floor((Date.now() - progressData.startTime) / 60000);
        
        // Determina se√ß√£o favorita
        let maxTime = 0;
        let favoriteSection = 'Home';
        for (const [section, time] of Object.entries(progressData.sectionTime)) {
          if (time > maxTime) {
            maxTime = time;
            favoriteSection = section;
          }
        }
        
        // Atualiza interface
        updateProgressDisplay();
        
        this.updateStatus('üìä Coletando dados...');
      }

      addTask(name, task) {
        this.tasks.set(name, task);
        this.updateStatus(`‚ûï Adicionada: ${name}`);
      }

      runTask(name) {
        const task = this.tasks.get(name);
        if (task) {
          this.updateStatus(`‚öôÔ∏è Executando: ${name}`);
          return task();
        }
      }
    }

    // Inicializa√ß√£o do sistema
    const backgroundProcessor = new BackgroundProcessor();

    // Carregar dados salvos
    function loadProgressData() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        const parsed = JSON.parse(saved);
        progressData = {
          ...progressData,
          ...parsed,
          sectionsVisited: new Set(parsed.sectionsVisited || []),
          gamesPlayed: new Set(parsed.gamesPlayed || []),
          badges: new Set(parsed.badges || []),
          startTime: parsed.startTime || Date.now()
        };
      }
      updateProgressDisplay();
    }

    // Salvar dados de progresso
    function saveProgressData() {
      const toSave = {
        ...progressData,
        sectionsVisited: Array.from(progressData.sectionsVisited),
        gamesPlayed: Array.from(progressData.gamesPlayed),
        badges: Array.from(progressData.badges)
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
    }

    // Atualizar display de progresso
    function updateProgressDisplay() {
      // Se√ß√µes visitadas
      const sectionsCount = progressData.sectionsVisited.size;
      const sectionsProgress = (sectionsCount / 12) * 100;
      document.getElementById('sectionsProgress').style.width = `${sectionsProgress}%`;
      document.getElementById('sectionsCount').textContent = `${sectionsCount} de 12`;

      // Quiz
      const quizProgress = progressData.quizCompleted ? 100 : 0;
      document.getElementById('quizProgress').style.width = `${quizProgress}%`;
      document.getElementById('quizScore').textContent = `${progressData.quizScore}% de acertos`;

      // Hist√≥rias
      const storiesProgress = (progressData.storiesRead / 3) * 100;
      document.getElementById('storiesProgress').style.width = `${storiesProgress}%`;
      document.getElementById('storiesCount').textContent = `${progressData.storiesRead} de 3 cap√≠tulos`;

      // Jogos
      const gamesProgress = progressData.gamesPlayed.size > 0 ? 100 : 0;
      document.getElementById('gamesProgress').style.width = `${gamesProgress}%`;
      document.getElementById('gamesCount').textContent = `${progressData.gamesPlayed.size} jogos completados`;

      // Badges
      updateBadges();

      // Estat√≠sticas detalhadas
      if (document.getElementById('totalTime')) {
        document.getElementById('totalTime').textContent = `${progressData.totalTime} minutos`;
        document.getElementById('lastActivity').textContent = progressData.lastActivity || 'Nenhuma';
        
        // Se√ß√£o favorita
        let favoriteSection = 'Em an√°lise...';
        if (Object.keys(progressData.sectionTime).length > 0) {
          favoriteSection = Object.keys(progressData.sectionTime).reduce((a, b) => 
            (progressData.sectionTime[a] || 0) > (progressData.sectionTime[b] || 0) ? a : b
          );
        }
        document.getElementById('favoriteSection').textContent = favoriteSection;
        
        // Streak
        const streak = Math.floor(progressData.totalTime / 60) || 0;
        document.getElementById('learningStreak').textContent = `${streak} dias`;
      }
    }

    // Sistema de badges/conquistas
    function updateBadges() {
      const badgesContainer = document.getElementById('badgesContainer');
      if (!badgesContainer) return;

      badgesContainer.innerHTML = '';

      // Verificar novas conquistas
      checkAchievements();

      // Mostrar badges
      if (progressData.badges.size === 0) {
        badgesContainer.innerHTML = '<p style="opacity: 0.7;">Nenhuma conquista desbloqueada ainda. Continue explorando!</p>';
      } else {
        progressData.badges.forEach(badge => {
          const badgeElement = document.createElement('span');
          badgeElement.className = 'badge';
          badgeElement.textContent = badge;
          badgesContainer.appendChild(badgeElement);
        });
      }
    }

    // Verificar conquistas
    function checkAchievements() {
      const newBadges = [];

      if (progressData.sectionsVisited.size >= 3 && !progressData.badges.has('üó∫Ô∏è Explorador')) {
        newBadges.push('üó∫Ô∏è Explorador');
      }

      if (progressData.sectionsVisited.size >= 8 && !progressData.badges.has('üåü Historiador Junior')) {
        newBadges.push('üåü Historiador Junior');
      }

      if (progressData.quizCompleted && progressData.quizScore >= 75 && !progressData.badges.has('üß† Mestre do Quiz')) {
        newBadges.push('üß† Mestre do Quiz');
      }

      if (progressData.storiesRead >= 3 && !progressData.badges.has('üìö Contador de Hist√≥rias')) {
        newBadges.push('üìö Contador de Hist√≥rias');
      }

      if (progressData.totalTime >= 30 && !progressData.badges.has('‚è∞ Dedicado')) {
        newBadges.push('‚è∞ Dedicado');
      }

      if (progressData.gamesPlayed.size > 0 && !progressData.badges.has('üéÆ Jogador')) {
        newBadges.push('üéÆ Jogador');
      }

      // Adicionar novas badges
      newBadges.forEach(badge => {
        progressData.badges.add(badge);
        showBadgeNotification(badge);
      });

      if (newBadges.length > 0) {
        saveProgressData();
      }
    }

    // Mostrar notifica√ß√£o de nova badge
    function showBadgeNotification(badge) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
        padding: 20px;
        border-radius: 15px;
        z-index: 10000;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        animation: bounceIn 0.6s ease;
      `;
      notification.innerHTML = `
        <h3>üéâ Nova Conquista!</h3>
        <p style="font-size: 24px; margin: 10px 0;">${badge}</p>
        <p>Parab√©ns pelo seu progresso!</p>
      `;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.animation = 'bounceOut 0.6s ease';
        setTimeout(() => notification.remove(), 600);
      }, 3000);
    }

    // Fun√ß√µes de controle de progresso
    function resetProgress() {
      if (confirm('Tem certeza que deseja resetar todo o seu progresso? Esta a√ß√£o n√£o pode ser desfeita.')) {
        localStorage.removeItem(STORAGE_KEY);
        progressData = {
          sectionsVisited: new Set(),
          quizCompleted: false,
          quizScore: 0,
          storiesRead: 0,
          gamesPlayed: new Set(),
          badges: new Set(),
          totalTime: 0,
          lastActivity: null,
          sectionTime: {},
          startTime: Date.now()
        };
        updateProgressDisplay();
        backgroundProcessor.updateStatus('üîÑ Progresso resetado');
      }
    }

    function exportProgress() {
      const data = {
        ...progressData,
        sectionsVisited: Array.from(progressData.sectionsVisited),
        gamesPlayed: Array.from(progressData.gamesPlayed),
        badges: Array.from(progressData.badges),
        exportDate: new Date().toISOString()
      };

      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `portal_historia_progresso_${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      backgroundProcessor.updateStatus('üìä Dados exportados');
    }

    // Tracking de se√ß√µes
    let currentSectionStartTime = Date.now();

    // Alternar se√ß√µes (modificado para incluir tracking)
    function showSection(sectionId) {
      // Salvar tempo da se√ß√£o anterior
      const currentTime = Date.now();
      const currentSection = document.querySelector('.section.active')?.id;
      if (currentSection) {
        const timeSpent = currentTime - currentSectionStartTime;
        progressData.sectionTime[currentSection] = (progressData.sectionTime[currentSection] || 0) + timeSpent;
      }

      // Alternar se√ß√µes
      const sections = document.getElementsByClassName("section");
      for (let sec of sections) {
        sec.classList.remove("active");
      }
      document.getElementById(sectionId).classList.add("active");
      window.scrollTo(0, 0);

      // Tracking de progresso
      progressData.sectionsVisited.add(sectionId);
      progressData.lastActivity = `Visitou se√ß√£o: ${sectionId}`;
      currentSectionStartTime = currentTime;

      // Auto-save
      backgroundProcessor.addTask('saveProgress', () => saveProgressData());
      setTimeout(() => backgroundProcessor.runTask('saveProgress'), 1000);

      // Atualizar display se estiver na se√ß√£o de progresso
      if (sectionId === 'progresso') {
        updateProgressDisplay();
      }
    }

    // S√≠ntese de fala para acessibilidade
    function speakText(text) {
      if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'pt-BR';
        window.speechSynthesis.speak(msg);
      } else {
        alert("Seu navegador n√£o suporta s√≠ntese de fala.");
      }
    }

    /* ======== Quiz de Hist√≥ria ========= */
    const quizPerguntas = [
      { pergunta: "Quem foi o primeiro imperador do Brasil?", respostas: ["Dom Pedro I", "Dom Jo√£o VI"], correta: 0 },
      { pergunta: "Qual civiliza√ß√£o √© conhecida como 'ber√ßo da democracia'?", respostas: ["Roma", "Gr√©cia"], correta: 1 },
      { pergunta: "A Idade M√©dia foi marcada principalmente por qual sistema econ√¥mico?", respostas: ["Feudalismo", "Capitalismo"], correta: 0 },
      { pergunta: "Quem pintou a Mona Lisa?", respostas: ["Michelangelo", "Leonardo da Vinci"], correta: 1 }
    ];
    let quizIndice = 0;
    let quizPontuacao = 0;
    function startQuiz() {
      quizIndice = 0;
      quizPontuacao = 0;
      document.getElementById("resultadoQuiz").innerText = "";
      mostrarPerguntaQuiz();
    }
    function mostrarPerguntaQuiz() {
      if (quizIndice < quizPerguntas.length) {
        const quest = quizPerguntas[quizIndice];
        document.getElementById("quizPergunta").innerText = quest.pergunta;
        document.getElementById("resposta1").innerText = quest.respostas[0];
        document.getElementById("resposta2").innerText = quest.respostas[1];
        document.getElementById("resposta1").style.display = "inline-block";
        document.getElementById("resposta2").style.display = "inline-block";
        document.getElementById("resposta1").onclick = () => checarRespostaQuiz(0);
        document.getElementById("resposta2").onclick = () => checarRespostaQuiz(1);
      }
    }
    function checarRespostaQuiz(r) {
      const quest = quizPerguntas[quizIndice];
      if (r === quest.correta) {
        alert("Muito bem! Resposta certa.");
        quizPontuacao++;
      } else {
        alert("Ops, resposta errada.");
      }
      quizIndice++;
      if (quizIndice < quizPerguntas.length) {
        mostrarPerguntaQuiz();
      } else {
        exibirResultadoQuiz();
      }
    }
    function exibirResultadoQuiz() {
      document.getElementById("quizPergunta").innerText = "";
      document.getElementById("resposta1").style.display = "none";
      document.getElementById("resposta2").style.display = "none";
      
      const scorePercentage = Math.round((quizPontuacao / quizPerguntas.length) * 100);
      document.getElementById("resultadoQuiz").innerText = `Voc√™ acertou ${quizPontuacao} de ${quizPerguntas.length} perguntas! (${scorePercentage}%)`;
      
      // Atualizar progresso
      progressData.quizCompleted = true;
      progressData.quizScore = scorePercentage;
      progressData.lastActivity = `Completou quiz com ${scorePercentage}% de acertos`;
      
      // Verificar conquistas
      checkAchievements();
      
      // Auto-save
      backgroundProcessor.updateStatus('üíæ Salvando resultado do quiz...');
      saveProgressData();
      
      const restartButton = document.createElement("button");
      restartButton.innerText = "Reiniciar Quiz";
      restartButton.onclick = startQuiz;
      document.getElementById("resultadoQuiz").appendChild(restartButton);
    }

    /* ======== Conta√ß√£o de Hist√≥rias Interativa ========= */
    const storyChapters = [
      {
        titulo: "Cap√≠tulo 1: A Partida",
        texto: "Em 1500, os navegadores portugueses zarparam em dire√ß√£o ao desconhecido, iniciando a aventura que levaria √† descoberta do Brasil.",
        imagem: "media/cabral_ship.jpg"
      },
      {
        titulo: "Cap√≠tulo 2: A Chegada",
        texto: "Ap√≥s uma longa viagem, a frota avistou novas terras e iniciou o contato com os povos ind√≠genas, dando in√≠cio a uma hist√≥ria de encontros e desafios.",
        imagem: "media/map_brazil_colonial.jpg"
      },
      {
        titulo: "Cap√≠tulo 3: A Transforma√ß√£o",
        texto: "Com o tempo, a nova terra passou por profundas transforma√ß√µes culturais, econ√¥micas e sociais, moldando a identidade de um pa√≠s em constru√ß√£o.",
        imagem: "media/great_pyramid_of_giza.jpg"
      }
    ];
    let currentChapter = 0;
    function displayChapter() {
      const container = document.getElementById("storyContainer");
      const chapter = storyChapters[currentChapter];
      container.innerHTML = `
        <h3>${chapter.titulo}</h3>
        <p>${chapter.texto}</p>
        <div class="image-container">
          <img src="${chapter.imagem}" alt="${chapter.titulo}">
        </div>
      `;
    }
    function nextChapter() {
      if (currentChapter < storyChapters.length - 1) {
        currentChapter++;
        displayChapter();
        
        // Atualizar progresso de leitura
        progressData.storiesRead = Math.max(progressData.storiesRead, currentChapter + 1);
        progressData.lastActivity = `Leu cap√≠tulo ${currentChapter + 1}`;
        
        // Verificar conquistas
        checkAchievements();
        
        // Auto-save em background
        backgroundProcessor.addTask('saveStoryProgress', () => {
          backgroundProcessor.updateStatus('üìñ Salvando progresso da hist√≥ria...');
          saveProgressData();
        });
        setTimeout(() => backgroundProcessor.runTask('saveStoryProgress'), 500);
      }
    }
    function prevChapter() {
      if (currentChapter > 0) {
        currentChapter--;
        displayChapter();
        
        // Tracking de navega√ß√£o
        progressData.lastActivity = `Voltou para cap√≠tulo ${currentChapter + 1}`;
      }
    }
    function speakStory() {
      const chapter = storyChapters[currentChapter];
      speakText(chapter.texto);
    }
    // Inicializa o primeiro cap√≠tulo
    displayChapter();

    /* ======== Linha do Tempo Interativa ========= */
    const eras = {
      pre: {
        titulo: "Pr√©-Hist√≥ria",
        descricao: "Per√≠odo anterior √† escrita, marcado pelas primeiras manifesta√ß√µes culturais e art√≠sticas do homem.",
        imagem: "media/prehistoric.jpg"
      },
      antiguidade: {
        titulo: "Antiguidade",
        descricao: "√âpoca das grandes civiliza√ß√µes como a Eg√≠pcia, Grega e Romana, que estabeleceram as bases da cultura ocidental.",
        imagem: "media/ancient.jpg"
      },
      media: {
        titulo: "Idade M√©dia",
        descricao: "Per√≠odo marcado pelo feudalismo, pela influ√™ncia da Igreja e por importantes transforma√ß√µes culturais na Europa.",
        imagem: "media/medieval.jpg"
      },
      moderna: {
        titulo: "Idade Moderna",
        descricao: "Per√≠odo de grandes descobertas, revolu√ß√µes e o surgimento dos Estados modernos.",
        imagem: "media/renaissance.jpg"
      },
      contemporanea: {
        titulo: "Idade Contempor√¢nea",
        descricao: "√âpoca atual, marcada por avan√ßos tecnol√≥gicos, transforma√ß√µes sociais e a globaliza√ß√£o.",
        imagem: "media/modern.jpg"
      }
    };
    function showEra(eraKey) {
      const era = eras[eraKey];
      const container = document.getElementById("eraContainer");
      container.innerHTML = `
        <h3>${era.titulo}</h3>
        <p>${era.descricao}</p>
        <div class="image-container">
          <img src="${era.imagem}" alt="${era.titulo}">
        </div>
        <button onclick="speakText('${era.descricao}')" aria-label="Ouvir ${era.titulo}">Ouvir ${era.titulo}</button>
      `;
    }

    /* ======== Jogo de Mem√≥ria ========= */
    const memoryCardsData = [
      { id: 1, conteudo: "‚õµ", descricao: "Navio de Cabral" },
      { id: 2, conteudo: "üè∫", descricao: "Vaso Antigo" },
      { id: 3, conteudo: "üè∞", descricao: "Castelo Medieval" },
      { id: 4, conteudo: "üóø", descricao: "Escultura Hist√≥rica" }
    ];
    let memoryCards = [];
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    function shuffle(array) {
      array.sort(() => Math.random() - 0.5);
    }
    function generateMemoryCards() {
      memoryCards = [...memoryCardsData, ...memoryCardsData]; // duplicar os pares
      shuffle(memoryCards);
      const gameContainer = document.getElementById("memoryGame");
      gameContainer.innerHTML = "";
      memoryCards.forEach((card, index) => {
        const cardElement = document.createElement("div");
        cardElement.classList.add("memory-card");
        cardElement.setAttribute("data-id", card.id);
        cardElement.setAttribute("aria-label", "Carta virada");
        cardElement.innerText = "";
        cardElement.onclick = () => flipCard(cardElement, index);
        gameContainer.appendChild(cardElement);
      });
    }
    function flipCard(cardElement, index) {
      if (lockBoard || cardElement.classList.contains("flipped")) return;
      cardElement.classList.add("flipped");
      cardElement.innerText = memoryCards[index].conteudo;
      if (!firstCard) {
        firstCard = { cardElement, index };
      } else {
        secondCard = { cardElement, index };
        checkForMatch();
      }
    }
    function checkForMatch() {
      const isMatch = memoryCards[firstCard.index].id === memoryCards[secondCard.index].id;
      if (isMatch) {
        firstCard.cardElement.classList.add("matched");
        secondCard.cardElement.classList.add("matched");
        resetMemorySelection();
        
        // Verificar se o jogo foi completado
        const allMatched = document.querySelectorAll('.memory-card.matched').length === memoryCards.length;
        if (allMatched) {
          progressData.gamesPlayed.add('memoria');
          progressData.lastActivity = 'Completou o jogo de mem√≥ria';
          
          // Notifica√ß√£o de sucesso
          setTimeout(() => {
            backgroundProcessor.updateStatus('üéâ Jogo de mem√≥ria completado!');
            checkAchievements();
            saveProgressData();
          }, 500);
        }
      } else {
        lockBoard = true;
        setTimeout(() => {
          firstCard.cardElement.classList.remove("flipped");
          firstCard.cardElement.innerText = "";
          secondCard.cardElement.classList.remove("flipped");
          secondCard.cardElement.innerText = "";
          resetMemorySelection();
        }, 1000);
      }
    }
    function resetMemorySelection() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }
    function resetMemoryGame() {
      generateMemoryCards();
    }
    // Inicializa o jogo de mem√≥ria
    generateMemoryCards();

    /* ======== Conversor Braille ========= */
    const brailleMap = {
      'a': '‚†Å', 'b': '‚†É', 'c': '‚†â', 'd': '‚†ô', 'e': '‚†ë', 'f': '‚†ã', 'g': '‚†õ',
      'h': '‚†ì', 'i': '‚†ä', 'j': '‚†ö', 'k': '‚†Ö', 'l': '‚†á', 'm': '‚†ç', 'n': '‚†ù',
      'o': '‚†ï', 'p': '‚†è', 'q': '‚†ü', 'r': '‚†ó', 's': '‚†é', 't': '‚†û', 'u': '‚†•',
      'v': '‚†ß', 'w': '‚†∫', 'x': '‚†≠', 'y': '‚†Ω', 'z': '‚†µ',
      '1': '‚†º‚†Å', '2': '‚†º‚†É', '3': '‚†º‚†â', '4': '‚†º‚†ô', '5': '‚†º‚†ë',
      '6': '‚†º‚†ã', '7': '‚†º‚†õ', '8': '‚†º‚†ì', '9': '‚†º‚†ä', '0': '‚†º‚†ö',
      '.': '‚†≤', ',': '‚†Ç', '?': '‚†¶', '!': '‚†ñ', ' ': ' '
    };
    function converterParaBraille() {
      let input = document.getElementById('brailleInput').value;
      let output = '';
      for (let c of input.toLowerCase()) {
        output += brailleMap[c] || c;
      }
      document.getElementById('brailleOutput').innerText = output;
    }

    /* ======== Inicializa√ß√£o do Sistema ========= */
    
    // Inicializar quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', function() {
      // Carregar dados salvos
      loadProgressData();
      
      // Iniciar processamento em background
      backgroundProcessor.start();
      
      // Inicializar outros componentes
      displayChapter();
      generateMemoryCards();
      
      // Marcar p√°gina inicial como visitada
      progressData.sectionsVisited.add('home');
      progressData.lastActivity = 'Iniciou sess√£o no portal';
      currentSectionStartTime = Date.now();
      
      console.log('üöÄ Portal Interativo de Hist√≥ria inicializado com sistema de progresso!');
    });

    // Salvar progresso antes de sair da p√°gina
    window.addEventListener('beforeunload', function() {
      // Salvar tempo da se√ß√£o atual
      const currentSection = document.querySelector('.section.active')?.id;
      if (currentSection) {
        const timeSpent = Date.now() - currentSectionStartTime;
        progressData.sectionTime[currentSection] = (progressData.sectionTime[currentSection] || 0) + timeSpent;
      }
      
      // Salvar dados finais
      saveProgressData();
    });

    // Adicionar anima√ß√µes CSS dinamicamente
    const style = document.createElement('style');
    style.textContent = `
      @keyframes bounceIn {
        0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
        50% { transform: translate(-50%, -50%) scale(1.05); }
        70% { transform: translate(-50%, -50%) scale(0.9); }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      }
      @keyframes bounceOut {
        0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
  
</body>
</html>
